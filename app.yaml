runtime: python311

entrypoint: gunicorn -w 4 -k uvicorn.workers.UvicornWorker main:app

instance_class: F2  # or F1, F4 depending on your needs

env_variables:
  PYTHONUNBUFFERED: '1'

handlers:
- url: /staticfile
  static_dir: staticfile

- url: /design
  static_dir: design

- url: /assets
  static_dir: assets

- url: /.*
  script: auto
  
readiness_check:
  path: "/_ah/warmup"             # Route to call to test if app is ready
  check_interval_sec: 5           # Ping every 5 seconds to see if it's ready
  timeout_sec: 4                  # If no response in 4 seconds, consider it failed
  failure_threshold: 2            # Fail only after 2 consecutive failures
